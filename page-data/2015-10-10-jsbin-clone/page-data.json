{"componentChunkName":"component---src-templates-blog-post-js","path":"/2015-10-10-jsbin-clone/","result":{"data":{"site":{"id":"Site","siteMetadata":{"title":"Swapnil Mishra Blog"}},"markdownRemark":{"id":"864e57cd-455f-5ae6-a718-cdeff4749c0c","excerpt":"I have always wondered how awesome tools like jsbin, jsfiddle or dabblet work. So, thought of putting together some code to do the same. alt text Show me some…","html":"<p>I have always wondered how awesome tools like <a href=\"jsbin.com\">jsbin</a>, <a href=\"https://jsfiddle.net\">jsfiddle</a> or <a href=\"http://dabblet.com/\">dabblet</a> work. So, thought of putting together some code to do the same.</p>\n<p><img src=\"https://raw.githubusercontent.com/swapnilmishra/jsbin-jsfiddle-clone/master/screenshot/screen.gif\" alt=\"alt text\" title=\"Demo run screenshot\"></p>\n<h3>Show me some code</h3>\n<p>It basically boils down to creating an iframe and injecting the content(html,css,js) to update. All the code to build this is on my <a href=\"https://github.com/swapnilmishra/jsbin-jsfiddle-clone\">github repo</a>. Below is the code from <a href=\"https://github.com/swapnilmishra/jsbin-jsfiddle-clone/blob/master/src/createIFrame.js\">createIframe.js</a> file which takes raw HTML,JS,CSS and create an iframe from it there by showing the output.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> frameEl<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">createFrame</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>html<span class=\"token punctuation\">,</span>js<span class=\"token punctuation\">,</span>css<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// memoize frame element</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>frameEl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        frameEl<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    frameEl <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'iframe'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> el <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#root\"</span><span class=\"token punctuation\">)</span>\n    frameEl<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"iframe\"</span><span class=\"token punctuation\">)</span>\n    frameEl<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"class\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"output\"</span><span class=\"token punctuation\">)</span>    \n    el<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>frameEl<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> doc <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#iframe'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>contentWindow<span class=\"token punctuation\">.</span>document\n    <span class=\"token keyword\">const</span> head <span class=\"token operator\">=</span> doc<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"head\"</span><span class=\"token punctuation\">)</span>\n    doc<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> html<span class=\"token punctuation\">;</span>\n    head<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span><span class=\"token function\">createEl</span><span class=\"token punctuation\">(</span><span class=\"token string\">'script'</span><span class=\"token punctuation\">,</span>js<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    head<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span><span class=\"token function\">createEl</span><span class=\"token punctuation\">(</span><span class=\"token string\">'style'</span><span class=\"token punctuation\">,</span>css<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">createEl</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">type<span class=\"token punctuation\">,</span>innerhtml</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> el <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span>\n    el<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> innerhtml\n    <span class=\"token keyword\">return</span> el<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>How to run</h3>\n<p>After cloing the <a href=\"https://github.com/swapnilmishra/jsbin-jsfiddle-clone\">github repo</a> run given below commands.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">npm install\nnpm start</code></pre></div>\n<h3>Tooling used</h3>\n<ul>\n<li><a href=\"https://codemirror.net\">Codemirror</a> - For syntax highlighting</li>\n<li><a href=\"https://webpack.github.io/\">Webpack</a> - For module building and livereload</li>\n</ul>\n<h3>What’s not implemented here</h3>\n<p>Whatever I have implemented here is the easiest thing to build for these type of tools. There are tons of other things which need to be done for a tool like this to work in production. In this <a href=\"https://github.com/jsbin/jsbin/wiki/Best-practices-for-building-your-own-live-paste-bin\">link</a>, creator of jsbin(<a href=\"https://twitter.com/rem\">Remy sharp</a>), jsfiddle(<a href=\"https://twitter.com/zalun\">Piotr Zalewa</a>) and dabblet(<a href=\"https://twitter.com/LeaVerou\">Lea verou</a> ) discusses various best practices and security aspects which are very important.</p>\n<p>Few of the things which would be needed are :</p>\n<ul>\n<li>Handling user-accounts/login/signup/saving.</li>\n<li>Ensuring the iframe is not used for XSS attacks.</li>\n<li>Ensuring the high availablity and concurrency in case of multiple concurrent edits.</li>\n<li>JSbin(which is my favorite) also keeps history of every edit made.</li>\n<li>Linting CSS, JS, HTML.</li>\n<li>Support for preprocessors.</li>\n<li>Code collaboration using WebRTC.</li>\n</ul>\n<p>I have tried to shed some light on how these tools can be built and hope this would be useful to many of you. We are very fortunate to have these smart people who have built all these awesome tools which, makes our life so easy. Thats why the web is the most vibrant open source community.</p>","frontmatter":{"title":"How to build pastebins like jsbin, jsfiddle, dabblet","date":"November 27, 2016","description":"I have always wondered how awesome tools like jsbin, jsfiddle or dabblet work. So, thought of putting together some code to do the same."}}},"pageContext":{"slug":"/2015-10-10-jsbin-clone/","previous":{"fields":{"slug":"/binary-search-tree/"},"frontmatter":{"title":"Building and walking a binary search tree"}},"next":{"fields":{"slug":"/underscore-get/"},"frontmatter":{"title":"Coding underscore get"}}}}}